<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开放平台API | 众圈小程序</title>
    <meta name="description" content="在线开发文档">
    <link rel="icon" href="/mpweex-site/favicon.ico">
    
    <link rel="preload" href="/mpweex-site/assets/css/0.styles.8398025e.css" as="style"><link rel="preload" href="/mpweex-site/assets/js/app.f6619798.js" as="script"><link rel="preload" href="/mpweex-site/assets/js/96.249615e6.js" as="script"><link rel="prefetch" href="/mpweex-site/assets/js/10.4c1ab4e4.js"><link rel="prefetch" href="/mpweex-site/assets/js/100.85d7966c.js"><link rel="prefetch" href="/mpweex-site/assets/js/101.cd98601f.js"><link rel="prefetch" href="/mpweex-site/assets/js/102.692c84af.js"><link rel="prefetch" href="/mpweex-site/assets/js/103.4776d580.js"><link rel="prefetch" href="/mpweex-site/assets/js/104.90f29b05.js"><link rel="prefetch" href="/mpweex-site/assets/js/105.e6d01108.js"><link rel="prefetch" href="/mpweex-site/assets/js/106.2a3dbb08.js"><link rel="prefetch" href="/mpweex-site/assets/js/107.26505eb2.js"><link rel="prefetch" href="/mpweex-site/assets/js/108.c92a6fd3.js"><link rel="prefetch" href="/mpweex-site/assets/js/109.0d367f50.js"><link rel="prefetch" href="/mpweex-site/assets/js/11.18b36907.js"><link rel="prefetch" href="/mpweex-site/assets/js/110.d0ba3b0e.js"><link rel="prefetch" href="/mpweex-site/assets/js/12.4f52fbe6.js"><link rel="prefetch" href="/mpweex-site/assets/js/13.93634170.js"><link rel="prefetch" href="/mpweex-site/assets/js/14.37245866.js"><link rel="prefetch" href="/mpweex-site/assets/js/15.eeef5c81.js"><link rel="prefetch" href="/mpweex-site/assets/js/16.6f5e5cf8.js"><link rel="prefetch" href="/mpweex-site/assets/js/17.79b23d0b.js"><link rel="prefetch" href="/mpweex-site/assets/js/18.ff2cb15a.js"><link rel="prefetch" href="/mpweex-site/assets/js/19.c44a9793.js"><link rel="prefetch" href="/mpweex-site/assets/js/2.212532b2.js"><link rel="prefetch" href="/mpweex-site/assets/js/20.2463a201.js"><link rel="prefetch" href="/mpweex-site/assets/js/21.9deb8bad.js"><link rel="prefetch" href="/mpweex-site/assets/js/22.2888489a.js"><link rel="prefetch" href="/mpweex-site/assets/js/23.99f883af.js"><link rel="prefetch" href="/mpweex-site/assets/js/24.c0ee544d.js"><link rel="prefetch" href="/mpweex-site/assets/js/25.8f6698fb.js"><link rel="prefetch" href="/mpweex-site/assets/js/26.48e3d37b.js"><link rel="prefetch" href="/mpweex-site/assets/js/27.9e25f9a3.js"><link rel="prefetch" href="/mpweex-site/assets/js/28.6ef10ccc.js"><link rel="prefetch" href="/mpweex-site/assets/js/29.c4f2e16e.js"><link rel="prefetch" href="/mpweex-site/assets/js/3.814b9504.js"><link rel="prefetch" href="/mpweex-site/assets/js/30.53e6f1b8.js"><link rel="prefetch" href="/mpweex-site/assets/js/31.1c690baa.js"><link rel="prefetch" href="/mpweex-site/assets/js/32.b1dc19c0.js"><link rel="prefetch" href="/mpweex-site/assets/js/33.8b248829.js"><link rel="prefetch" href="/mpweex-site/assets/js/34.badb09d3.js"><link rel="prefetch" href="/mpweex-site/assets/js/35.3cf3f444.js"><link rel="prefetch" href="/mpweex-site/assets/js/36.c82760d7.js"><link rel="prefetch" href="/mpweex-site/assets/js/37.27a93f93.js"><link rel="prefetch" href="/mpweex-site/assets/js/38.1a331046.js"><link rel="prefetch" href="/mpweex-site/assets/js/39.3efc28b0.js"><link rel="prefetch" href="/mpweex-site/assets/js/4.7439af6a.js"><link rel="prefetch" href="/mpweex-site/assets/js/40.33b7802c.js"><link rel="prefetch" href="/mpweex-site/assets/js/41.e008ac01.js"><link rel="prefetch" href="/mpweex-site/assets/js/42.c6b98e64.js"><link rel="prefetch" href="/mpweex-site/assets/js/43.3f6b5d5c.js"><link rel="prefetch" href="/mpweex-site/assets/js/44.d28bf4ac.js"><link rel="prefetch" href="/mpweex-site/assets/js/45.1de2fda8.js"><link rel="prefetch" href="/mpweex-site/assets/js/46.dac06067.js"><link rel="prefetch" href="/mpweex-site/assets/js/47.9f177e3f.js"><link rel="prefetch" href="/mpweex-site/assets/js/48.929628ae.js"><link rel="prefetch" href="/mpweex-site/assets/js/49.c4888863.js"><link rel="prefetch" href="/mpweex-site/assets/js/5.9e9a2cb5.js"><link rel="prefetch" href="/mpweex-site/assets/js/50.c8c5afa8.js"><link rel="prefetch" href="/mpweex-site/assets/js/51.56074cee.js"><link rel="prefetch" href="/mpweex-site/assets/js/52.cf0ca992.js"><link rel="prefetch" href="/mpweex-site/assets/js/53.3c812630.js"><link rel="prefetch" href="/mpweex-site/assets/js/54.a760031b.js"><link rel="prefetch" href="/mpweex-site/assets/js/55.766e1401.js"><link rel="prefetch" href="/mpweex-site/assets/js/56.48efaf3a.js"><link rel="prefetch" href="/mpweex-site/assets/js/57.9ec8df14.js"><link rel="prefetch" href="/mpweex-site/assets/js/58.5e525d25.js"><link rel="prefetch" href="/mpweex-site/assets/js/59.c0265afc.js"><link rel="prefetch" href="/mpweex-site/assets/js/6.94e89bd7.js"><link rel="prefetch" href="/mpweex-site/assets/js/60.a1fe8d1a.js"><link rel="prefetch" href="/mpweex-site/assets/js/61.f69b8dbf.js"><link rel="prefetch" href="/mpweex-site/assets/js/62.50c1922c.js"><link rel="prefetch" href="/mpweex-site/assets/js/63.75169ac8.js"><link rel="prefetch" href="/mpweex-site/assets/js/64.74249d3d.js"><link rel="prefetch" href="/mpweex-site/assets/js/65.f93e9cf2.js"><link rel="prefetch" href="/mpweex-site/assets/js/66.fac51152.js"><link rel="prefetch" href="/mpweex-site/assets/js/67.814c6c6c.js"><link rel="prefetch" href="/mpweex-site/assets/js/68.4303bc44.js"><link rel="prefetch" href="/mpweex-site/assets/js/69.88305bf1.js"><link rel="prefetch" href="/mpweex-site/assets/js/7.82ff3cf0.js"><link rel="prefetch" href="/mpweex-site/assets/js/70.3cf082f0.js"><link rel="prefetch" href="/mpweex-site/assets/js/71.8a8f58a6.js"><link rel="prefetch" href="/mpweex-site/assets/js/72.3ca2312c.js"><link rel="prefetch" href="/mpweex-site/assets/js/73.83d23129.js"><link rel="prefetch" href="/mpweex-site/assets/js/74.2df8df58.js"><link rel="prefetch" href="/mpweex-site/assets/js/75.dd472027.js"><link rel="prefetch" href="/mpweex-site/assets/js/76.3bdd95ab.js"><link rel="prefetch" href="/mpweex-site/assets/js/77.0a1b1138.js"><link rel="prefetch" href="/mpweex-site/assets/js/78.97210383.js"><link rel="prefetch" href="/mpweex-site/assets/js/79.5367a192.js"><link rel="prefetch" href="/mpweex-site/assets/js/8.37f244da.js"><link rel="prefetch" href="/mpweex-site/assets/js/80.2add8fe3.js"><link rel="prefetch" href="/mpweex-site/assets/js/81.9ffa3d31.js"><link rel="prefetch" href="/mpweex-site/assets/js/82.e7dfdd3b.js"><link rel="prefetch" href="/mpweex-site/assets/js/83.e2a37a24.js"><link rel="prefetch" href="/mpweex-site/assets/js/84.14401e59.js"><link rel="prefetch" href="/mpweex-site/assets/js/85.7a156174.js"><link rel="prefetch" href="/mpweex-site/assets/js/86.7c43d283.js"><link rel="prefetch" href="/mpweex-site/assets/js/87.0fbd3833.js"><link rel="prefetch" href="/mpweex-site/assets/js/88.72de228b.js"><link rel="prefetch" href="/mpweex-site/assets/js/89.447f0eed.js"><link rel="prefetch" href="/mpweex-site/assets/js/9.4aafc9f2.js"><link rel="prefetch" href="/mpweex-site/assets/js/90.98f94f35.js"><link rel="prefetch" href="/mpweex-site/assets/js/91.3bee55c7.js"><link rel="prefetch" href="/mpweex-site/assets/js/92.185b3602.js"><link rel="prefetch" href="/mpweex-site/assets/js/93.c05e4b6c.js"><link rel="prefetch" href="/mpweex-site/assets/js/94.fe639327.js"><link rel="prefetch" href="/mpweex-site/assets/js/95.6041e672.js"><link rel="prefetch" href="/mpweex-site/assets/js/97.1d3cced9.js"><link rel="prefetch" href="/mpweex-site/assets/js/98.7a23a9e6.js"><link rel="prefetch" href="/mpweex-site/assets/js/99.44213410.js">
    <link rel="stylesheet" href="/mpweex-site/assets/css/0.styles.8398025e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mpweex-site/" class="home-link router-link-active"><img src="/mpweex-site/logo.svg" alt="众圈小程序" class="logo"> <span class="site-name can-hide">众圈小程序</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mpweex-site/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/mpweex-site/dev/" class="nav-link">文档</a></div><div class="nav-item"><a href="/mpweex-site/examples/" class="nav-link">案例</a></div><div class="nav-item"><a href="/mpweex-site/download/" class="nav-link">下载</a></div><div class="nav-item"><a href="/mpweex-site/operation/" class="nav-link">运营</a></div><div class="nav-item"><a href="https://zqmp.lmspay.com/zq-ordinary/login.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小程序商户平台
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/lmspay/mpweex-site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mpweex-site/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/mpweex-site/dev/" class="nav-link">文档</a></div><div class="nav-item"><a href="/mpweex-site/examples/" class="nav-link">案例</a></div><div class="nav-item"><a href="/mpweex-site/download/" class="nav-link">下载</a></div><div class="nav-item"><a href="/mpweex-site/operation/" class="nav-link">运营</a></div><div class="nav-item"><a href="https://zqmp.lmspay.com/zq-ordinary/login.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  小程序商户平台
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/lmspay/mpweex-site" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>API</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mpweex-site/guide/" class="sidebar-link">什么是 MPWeex</a></li><li><a href="/mpweex-site/guide/front-end-frameworks.html" class="sidebar-link">Weex 中的前端框架</a></li><li><a href="/mpweex-site/guide/platform-difference.html" class="sidebar-link">Weex 和 Web 的平台差异</a></li><li><a href="/mpweex-site/guide/use-vue-in-weex.html" class="sidebar-link">在 Weex 中使用 Vue.js</a></li><li><a href="/mpweex-site/guide/mpcrypto.html" class="sidebar-link">小程序加解密流程</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>小程序开发</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mpweex-site/guide/develop/setup-develop-environment.html" class="sidebar-link">设置开发环境</a></li><li><a href="/mpweex-site/guide/develop/create_new_mp.html" class="sidebar-link">创建一个新的小程序</a></li><li><a href="/mpweex-site/guide/develop/login.html" class="sidebar-link">授权登录及安全</a></li><li><a href="/mpweex-site/guide/develop/integrate-pay.html" class="sidebar-link">小程序集成支付</a></li><li><a href="/mpweex-site/guide/develop/openapi.html" class="active sidebar-link">开放平台API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#集成-openapi-sdk" class="sidebar-link">集成 OpenApi SDK</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#信息安全" class="sidebar-link">信息安全</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#获取授权用户资料接口" class="sidebar-link">获取授权用户资料接口</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#获取授权用户手机号" class="sidebar-link">获取授权用户手机号</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商创建订单" class="sidebar-link">银商创建订单</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商查询订单" class="sidebar-link">银商查询订单</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商退款请求" class="sidebar-link">银商退款请求</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商退款查询" class="sidebar-link">银商退款查询</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商关闭订单" class="sidebar-link">银商关闭订单</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商支付结果异步通知" class="sidebar-link">银商支付结果异步通知</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#银商错误码、状态码枚举值" class="sidebar-link">银商错误码、状态码枚举值</a></li><li class="sidebar-sub-header"><a href="/mpweex-site/guide/develop/openapi.html#_400响应错误码" class="sidebar-link">400响应错误码</a></li></ul></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>SDK集成Android</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mpweex-site/guide/develop/integrate-to-android-app.html" class="sidebar-link">集成小程序SDK</a></li><li><a href="/mpweex-site/guide/develop/integrate-recommend-android.html" class="sidebar-link">集成推荐位View</a></li><li><a href="/mpweex-site/guide/develop/android-versions.html" class="sidebar-link">小程序SDK版本历史</a></li><li><a href="/mpweex-site/guide/develop/upgrade-to-v28.html" class="sidebar-link">0.20.X升级到0.28.X</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>SDK集成到iOS</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mpweex-site/guide/develop/integrate-to-iOS-app.html" class="sidebar-link">集成小程序SDK</a></li><li><a href="/mpweex-site/guide/develop/integrate-recommend-iOS.html" class="sidebar-link">集成推荐位View</a></li><li><a href="/mpweex-site/guide/develop/iOS-versions.html" class="sidebar-link">小程序SDK版本历史</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>扩展</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/mpweex-site/guide/extend/extend-android.html" class="sidebar-link">扩展 Android 的功能</a></li><li><a href="/mpweex-site/guide/extend/extend-ios.html" class="sidebar-link">扩展 iOS 的功能</a></li><li><a href="/mpweex-site/guide/extend/extend-ios-with-swift.html" class="sidebar-link">使用 Swift 扩展 iOS 的功能</a></li><li><a href="/mpweex-site/guide/extend/extend-web.html" class="sidebar-link">扩展 Web 组件</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h2 id="集成-openapi-sdk"><a href="#集成-openapi-sdk" aria-hidden="true" class="header-anchor">#</a> 集成 OpenApi SDK</h2> <h3 id="openapi-sdk-初始化"><a href="#openapi-sdk-初始化" aria-hidden="true" class="header-anchor">#</a> OpenApi SDK 初始化</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SDKContext</span> mSDKContext <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	
<span class="token annotation punctuation">@BeforeClass</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">setupSDK</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 初始化SDK</span>
        mSDKContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDKContext</span><span class="token punctuation">(</span>
               <span class="token string">&quot;http://localhost:8080/openapi/api/&quot;</span><span class="token punctuation">,</span> <span class="token comment">// API 地址</span>
               <span class="token string">&quot;your openid&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 小程序商户ID</span>
               <span class="token string">&quot;your mpid&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 小程序ID</span>
               <span class="token string">&quot;your private key&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 小程序私钥</span>
       <span class="token comment">// 设置超时时间</span>
       mSDKContext<span class="token punctuation">.</span><span class="token function">setHttpsTimeout</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">fail</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="sdk-maven依赖"><a href="#sdk-maven依赖" aria-hidden="true" class="header-anchor">#</a> SDK Maven依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slf4j-version</span><span class="token punctuation">&gt;</span></span>1.6.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slf4j-version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swagger-version</span><span class="token punctuation">&gt;</span></span>1.5.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swagger-version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jersey.version</span><span class="token punctuation">&gt;</span></span>2.26<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jersey.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jersey.media<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jersey-media-json-jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jersey.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jersey.inject<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jersey-hk2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jersey.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.glassfish.jersey.core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jersey-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${jersey.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.swagger<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>swagger-annotations<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${swagger-version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.lmspay.openapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zq-openapi-sdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>system<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>systemPath</span><span class="token punctuation">&gt;</span></span>${basedir}/libs/zq-openapi-sdk.1.0.7.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>systemPath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.txmpay.txmcoreclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>txmcore-client-sdk<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>MPORG.1.0.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>system<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>systemPath</span><span class="token punctuation">&gt;</span></span>${basedir}/libs/txmcore-client-sdk.MPORG.1.0.2.jar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>systemPath</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="信息安全"><a href="#信息安全" aria-hidden="true" class="header-anchor">#</a> 信息安全</h2> <h3 id="签名算法"><a href="#签名算法" aria-hidden="true" class="header-anchor">#</a> 签名算法</h3> <p>HTTP信息接口签名算法采用国家密码局于2010年12月发布的SM2算法。</p> <p>其中的USERID：由平台分配（十六进制值）</p> <p>SM2算法中默认的USERID为：31323334353637383132333435363738，本文档未采用默认值。</p> <p>对于采用Java语言开发的前置服务，将提供相应的接入SDK。</p> <h3 id="base64-编码"><a href="#base64-编码" aria-hidden="true" class="header-anchor">#</a> Base64 编码</h3> <p>本系统采用的是URL Safe Base64算法</p> <div class="language- extra-class"><pre class="language-text"><code>即先做传统base64编码，随后将+和/分别替换为- _两个字符，并且去除补位=。
</code></pre></div><p>另传统URL Safe Base64编码的转换表（Base64 Alphabet）为：</p> <div class="language- extra-class"><pre class="language-text"><code>ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_
</code></pre></div><p>本系统将转换表进行了置乱（示例值，生产参数请联系平台）：</p> <div class="language- extra-class"><pre class="language-text"><code>BaFGPul95Hhi8-opNefg20q3TA1VUvJOdxKWYZnr4bQLMjCIkwDXtE6zc7_RSmys
</code></pre></div><p>即：原索引0对应字符A，现在变成对应字符B，其它索引对应关系以此类推。</p> <h3 id="http-header"><a href="#http-header" aria-hidden="true" class="header-anchor">#</a> HTTP Header</h3> <p><strong>在HTTP Header中存放以下参数：</strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>描述</th> <th>示例值</th></tr></thead> <tbody><tr><td>openid</td> <td>String</td> <td>是</td> <td>小程序商户ID</td> <td>DVAAABa7u2UVzjt2j-YEml</td></tr> <tr><td>mpid</td> <td>String</td> <td>是</td> <td>小程序ID</td> <td>MPAAABbdzoiyVwAVWB_Qm2</td></tr> <tr><td>acctoken</td> <td>String</td> <td>是</td> <td>数据签名</td> <td>SI9ZmtnPUMD7JUyzpXQzWo2UQIamL68aOW2yyyZCEIaOXhiJLoWq4ChJzaeK-KxqzhxkBU8Ivs_R3whx9WxyFH</td></tr> <tr><td>timestamp</td> <td>String</td> <td>是</td> <td>时间戳（毫秒）</td> <td>1563525207309</td></tr> <tr><td>authtoken</td> <td>String</td> <td>否</td> <td>用户令牌</td> <td></td></tr></tbody></table> <h3 id="签名数据组装规则"><a href="#签名数据组装规则" aria-hidden="true" class="header-anchor">#</a> 签名数据组装规则</h3> <p>a) 将请求参数按字母顺序排列，然后进行拼接，此规则适应于含QueryParams的GET类请求以及参数类型为application/x-www-form-urlencoded
的POST类请求，如有以下参数(如果参数值为null、nil或空值的，则不拼接):</p> <div class="language- extra-class"><pre class="language-text"><code>a=1;

bc=&quot;2131&quot;;
ba=&quot;3232&quot;;
</code></pre></div><p>拼接结果为</p> <div class="language- extra-class"><pre class="language-text"><code>a=1&amp;ba=3232&amp;bc=2131
</code></pre></div><p>b) 对于POST类型请求会将请求数据放在body中，则也要加入进行签名（参与排序）。</p> <div class="language- extra-class"><pre class="language-text"><code>entity=...
</code></pre></div><p>c) 拼接完参数后，需要将请求地址、时间戳也进行拼接。拼接在参数或entity后，不参与排序。</p> <div class="language- extra-class"><pre class="language-text"><code>a=1&amp;ba=3232&amp;bc=2131&amp;path=/users/login&amp;timestamp=1563525207309

// post类：
entity=...&amp;path=/users/login&amp;timestamp=1563525207309
</code></pre></div><h2 id="获取授权用户资料接口"><a href="#获取授权用户资料接口" aria-hidden="true" class="header-anchor">#</a> 获取授权用户资料接口</h2> <p><strong>API应用场景说明：</strong></p> <p>小程序商户根据授权token获取授权用户资料</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>GET</td> <td>Json</td> <td>/users/getuserinfo</td></tr></tbody></table> <p><strong><code>请求参数：[Query]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>accesstoken</td> <td>String</td> <td>是</td> <td>授权token</td> <td>用户授权的token</td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>accesstoken=GuwrHb4p1wmST_iaAJaHzoNch0KKWCPpXn0SHAeRRQ12yAcDOrzQsdieMbWc2jB9dRgS_bJetDwl9Pd8awvEsXu5vEgJ8KGfMoCMeBLaDqR2K90E9d3MRPQzi4ofoZM5
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>UserModel {}</strong></td> <td><strong>Object</strong></td> <td>** 用户模型**</td> <td></td></tr> <tr><td>unionid</td> <td>String</td> <td>用户唯一标识</td> <td></td></tr> <tr><td>appid</td> <td>String</td> <td>APPID</td> <td></td></tr> <tr><td>appname</td> <td>String</td> <td>APP名称</td> <td></td></tr> <tr><td>gender</td> <td>Integer</td> <td>性别 0女 1男 2未设置</td> <td></td></tr> <tr><td>nickname</td> <td>String</td> <td>昵称</td> <td></td></tr> <tr><td>avatar</td> <td>String</td> <td>头像key</td> <td></td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;unionid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UNAAABbyI7eOEre5x2Bxtg&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;APAAABa7vrHaGjUJNIcZBi&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;appname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Playground&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;gender&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token property">&quot;nickname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;小众&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;avatar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://39.100.48.104:18080/avatar.png&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;未知错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="获取授权用户手机号"><a href="#获取授权用户手机号" aria-hidden="true" class="header-anchor">#</a> 获取授权用户手机号</h2> <p><strong>API应用场景说明：</strong> <code>since v0.28.2</code></p> <p>小程序商户根据授权token获取授权用户手机号</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>GET</td> <td>Json</td> <td>/users/getphoneno</td></tr></tbody></table> <p><strong><code>请求参数：[Query]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>accesstoken</td> <td>String</td> <td>是</td> <td>授权token</td> <td>用户授权的token</td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>accesstoken=GuwrHb4p1wmST_iaAJaHzoNch0KKWCPpXn0SHAeRRQ12yAcDOrzQsdieMbWc2jB9dRgS_bJetDwl9Pd8awvEsXu5vEgJ8KGfMoCMeBLaDqR2K90E9d3MRPQzi4ofoZM5
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>PhoneNoModel {}</strong></td> <td><strong>Object</strong></td> <td>** 用户手机号模型**</td> <td></td></tr> <tr><td>unionid</td> <td>String</td> <td>用户唯一标识</td> <td></td></tr> <tr><td>appid</td> <td>String</td> <td>APPID</td> <td></td></tr> <tr><td>appname</td> <td>String</td> <td>APP名称</td> <td></td></tr> <tr><td>phoneno</td> <td>String</td> <td>手机号</td> <td></td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;unionid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UNAAABbyI7eOEre5x2Bxtg&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;appid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;APAAABa7vrHaGjUJNIcZBi&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;appname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Playground&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;phoneno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13800138000&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作失败&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="银商创建订单"><a href="#银商创建订单" aria-hidden="true" class="header-anchor">#</a> 银商创建订单</h2> <p><strong>API应用场景说明：</strong></p> <p>小程序商户银商创建订单。</p> <p>本接口为商户的订单信息发向银商网络支付前置系统以获取支付要素。</p> <p>如果需要实名认证（APP接口实名认证暂只支持支付宝），必传姓名name，证件类型certType，证件号certNo，强制校验位fixBuyer=T。注意：支付宝支持的证件类型包括：身份证IDENTITY_CARD、护照PASSPORT、军官证OFFICER_CARD、士兵证SOLDIER_CARD、户口本HOKOU&quot;.敏感信息如姓名、证件号和手机号信息需要 base64编码。</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>POST</td> <td>Json</td> <td>/unionpay/order</td></tr></tbody></table> <p><strong><code>请求参数：[FormData, application/x-www-form-urlencoded]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>unionid</td> <td>String</td> <td>是</td> <td>用户唯一标识</td> <td></td></tr> <tr><td>appid</td> <td>String</td> <td>是</td> <td>APPID</td> <td></td></tr> <tr><td>msgType</td> <td>String</td> <td>是</td> <td>消息类型</td> <td>微信（app跳转小程序支付）:wx.appPreOrder <br>微信（直连）wx.unifiedOrder<br>支付宝：trade.precreate<br>全民付：qmf.order<br>银联云闪付（走银联全渠道）：uac.appOrder<br>ApplePay支付：applepay.order</td></tr> <tr><td>requestTimestamp</td> <td>String</td> <td>是</td> <td>报文请求时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>是</td> <td>终端号</td> <td></td></tr> <tr><td>paytoken</td> <td>String</td> <td>是</td> <td>支付token</td> <td>收银台生成</td></tr> <tr><td>merOrderId</td> <td>String</td> <td>是</td> <td>商户订单号</td> <td>商户自行生成，注意：长度不要超过32位</td></tr> <tr><td>orderDesc</td> <td>String</td> <td>是</td> <td>订单描述</td> <td>不超过255个字节（微信支付：上送值不大于128个字节，超过128字节后的部分会被截掉）</td></tr> <tr><td>totalAmount</td> <td>Integer</td> <td>是</td> <td>支付总金额</td> <td>单位分</td></tr> <tr><td>originalAmount</td> <td>Integer</td> <td>否</td> <td>订单原始金额</td> <td>单位分，用于记录前端系统打折前的金额</td></tr> <tr><td>attachedData</td> <td>String</td> <td>否</td> <td>商户附加数据</td> <td></td></tr> <tr><td>expireTime</td> <td>String</td> <td>否</td> <td>订单过期时间</td> <td>订单过期时间，为空则使用系统默认过期时间（30分钟），格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>notifyUrl</td> <td>String</td> <td>否</td> <td>支付结果通知地址</td> <td></td></tr> <tr><td>merchantUserId</td> <td>String</td> <td>否</td> <td>商户用户号</td> <td>全民付、applepay下单时 必传</td></tr> <tr><td>mobile</td> <td>String</td> <td>否</td> <td>实名认证手机号</td> <td>Base64编码</td></tr> <tr><td>name</td> <td>String</td> <td>否</td> <td>实名认证姓名</td> <td>Base64编码</td></tr> <tr><td>certType</td> <td>String</td> <td>否</td> <td>实名认证证件类型</td> <td>证件类型，支付宝支持身份证：IDENTITY_CARD、护照：PASSPORT、军官证：OFFICER_CARD、士兵证：SOLDIER_CARD、户口本：HOKOU</td></tr> <tr><td>certNo</td> <td>String</td> <td>否</td> <td>实名认证证件号</td> <td>Base64编码</td></tr> <tr><td>fixBuyer</td> <td>String</td> <td>否</td> <td>是否需要实名认证</td> <td>需要实名认证时置为 T</td></tr> <tr><td>limitCreditCard</td> <td>String</td> <td>否</td> <td>是否需要限制信用卡支付</td> <td>取值：true或false，默认false</td></tr> <tr><td>installmentNumber</td> <td>Integer</td> <td>否</td> <td>花呗分期数</td> <td>仅支持3、6、12 仅支持支付宝支付</td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>appid=APAAABa7vrHaGjUJNIcZBi&amp;merOrderId=O202005281141426870057655555&amp;msgType=wx.appPreOrder&amp;notifyUrl=https://zqmp.lmspay.com/pay-demo/order_notify&amp;orderDesc=prod-1590637297577&amp;originalAmount=1&amp;paytoken=gkU02581UqyeV2dzA5oxs8u7md5nzpzTPW0ShBFclRnvL6AmtEGqEi0JE-APe2dMFwETwONgYWgV6bEFhvf6ZkWw-kO1a9KAPh7m81433q_mXU9No0n0CcBzBdmHUj0u2qd2_C8Rrk0ScEmt8zbaJM&amp;requestTimestamp=2020-05-28 11:41:42&amp;tid=TEST0001&amp;totalAmount=1&amp;unionid=UNAAABbtQJ_nJSOvHt_ewB
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>UnionPayOrderResponseModel{}</strong></td> <td><strong>Object</strong></td> <td>** 银商创建订单返回模型**</td> <td></td></tr> <tr><td>errCode</td> <td>String</td> <td>平台错误码</td> <td>SUCCESS 表示请求成功</td></tr> <tr><td>errMsg</td> <td>String</td> <td>平台错误信息</td> <td>信息描述， 中文， 对应code的中文信息</td></tr> <tr><td>msgId</td> <td>String</td> <td>消息ID</td> <td>可协助后端快速排查问题</td></tr> <tr><td>msgType</td> <td>String</td> <td>消息类型</td> <td>微信（app跳转小程序支付）:wx.appPreOrder <br>微信（直连）wx.unifiedOrder<br>支付宝：trade.precreate<br>全民付：qmf.order<br>银联云闪付（走银联全渠道）：uac.appOrder<br>ApplePay支付：applepay.order</td></tr> <tr><td>responseTimestamp</td> <td>String</td> <td>报文响应时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>小程序平台交易流水号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>商户订单号</td> <td></td></tr> <tr><td>status</td> <td>String</td> <td>交易状态</td> <td></td></tr> <tr><td>totalAmount</td> <td>Integer</td> <td>支付总金额</td> <td>单位分</td></tr> <tr><td>targetOrderId</td> <td>String</td> <td>第三方支付订单号</td> <td></td></tr> <tr><td>targetSys</td> <td>String</td> <td>目标平台代码</td> <td></td></tr> <tr><td>targetStatus</td> <td>String</td> <td>目标平台的状态</td> <td></td></tr> <tr><td>jsPayRequest</td> <td>String</td> <td>JSAPI支付用的请求报文</td> <td>带有签名信息</td></tr> <tr><td>appPayRequest</td> <td>String</td> <td>APP支付用的请求报文</td> <td>带有签名信息</td></tr> <tr><td>prepayId</td> <td>String</td> <td>支付ID</td> <td>用于APP支付和公众号支付</td></tr> <tr><td>qrCode</td> <td>String</td> <td>支付二维码</td> <td>内容为URL，由终端转换成二维码显示</td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;appPayRequest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\&quot;package\&quot;:\&quot;Sign=WXPay\&quot;,\&quot;appid\&quot;:\&quot;wx71d6944b3b508932\&quot;,\&quot;sign\&quot;:\&quot;3B8DC17037024C6C3FD36C5C21978111\&quot;,\&quot;partnerid\&quot;:\&quot;376543455\&quot;,\&quot;prepayid\&quot;:\&quot;672b73785f8e4bf4b68943268df088de\&quot;,\&quot;noncestr\&quot;:\&quot;tHWUPaAbvcasxolLeVUNVhgCvDhPAcjy\&quot;,\&quot;timestamp\&quot;:\&quot;20200528114142\&quot;}&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;merOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;O202005281141426870057655555&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020052811414275145158&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wx.appPreOrder&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;responseTimestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 11:41:42&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetSys&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WXPay&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST0001&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;totalAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tradeno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711212020052811414274796709&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作失败&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="银商查询订单"><a href="#银商查询订单" aria-hidden="true" class="header-anchor">#</a> 银商查询订单</h2> <p><strong>API应用场景说明：</strong></p> <p>小程序商户银商查询订单。</p> <p>钱包支付时，因通讯故障、服务器故障等原因，造成收银机最终没有收到支付结果通知，收银员不确定该笔支付后台处理结果，可以在收银机上发起“查询”交易，查询该笔交易订单在钱包后台的支付结果，并将支付结果返回给收银机。</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>POST</td> <td>Json</td> <td>/unionpay/orderquery</td></tr></tbody></table> <p><strong><code>请求参数：[FormData, application/x-www-form-urlencoded]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>msgType</td> <td>String</td> <td>是</td> <td>消息类型</td> <td>query</td></tr> <tr><td>requestTimestamp</td> <td>String</td> <td>是</td> <td>报文请求时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>是</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>否</td> <td>小程序平台交易流水号</td> <td>三选一</td></tr> <tr><td>merOrderId</td> <td>String</td> <td>否</td> <td>商户订单号</td> <td>三选一</td></tr> <tr><td>targetOrderId</td> <td>String</td> <td>否</td> <td>第三方支付订单号</td> <td>三选一</td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>merOrderId=O202005281205015446564381934&amp;msgType=query&amp;requestTimestamp=2020-05-28 12:08:04&amp;tid=TEST0001
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>UnionPayOrderQueryResponseModel{}</strong></td> <td><strong>Object</strong></td> <td>** 银商查询订单返回模型**</td> <td></td></tr> <tr><td>errCode</td> <td>String</td> <td>平台错误码</td> <td>SUCCESS 表示请求成功</td></tr> <tr><td>errMsg</td> <td>String</td> <td>平台错误信息</td> <td>信息描述， 中文， 对应code的中文信息</td></tr> <tr><td>msgId</td> <td>String</td> <td>消息ID</td> <td>可协助后端快速排查问题</td></tr> <tr><td>msgType</td> <td>String</td> <td>消息类型</td> <td></td></tr> <tr><td>responseTimestamp</td> <td>String</td> <td>报文响应时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>小程序平台交易流水号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>商户订单号</td> <td></td></tr> <tr><td>targetOrderId</td> <td>String</td> <td>第三方支付订单号</td> <td></td></tr> <tr><td>status</td> <td>String</td> <td>交易状态</td> <td></td></tr> <tr><td>targetSys</td> <td>String</td> <td>目标平台代码</td> <td></td></tr> <tr><td>targetStatus</td> <td>String</td> <td>目标平台的状态</td> <td></td></tr> <tr><td>buyerId</td> <td>String</td> <td>买家ID</td> <td></td></tr> <tr><td>buyerUsername</td> <td>String</td> <td>买家用户名</td> <td></td></tr> <tr><td>subBuyerId</td> <td>String</td> <td>子买家ID</td> <td>比如微信的subOpenId</td></tr> <tr><td>bankCardNo</td> <td>String</td> <td>银行卡号</td> <td>如果有的话</td></tr> <tr><td>bankInfo</td> <td>String</td> <td>银行信息</td> <td></td></tr> <tr><td>totalAmount</td> <td>Integer</td> <td>支付总金额</td> <td>单位分</td></tr> <tr><td>buyerPayAmount</td> <td>Integer</td> <td>实付金额</td> <td>单位分</td></tr> <tr><td>invoiceAmount</td> <td>Integer</td> <td>开票金额</td> <td>单位分，交易中可给用户开具发票的金额</td></tr> <tr><td>couponAmount</td> <td>Integer</td> <td>网付计算的优惠金额</td> <td>单位分</td></tr> <tr><td>payTime</td> <td>String</td> <td>支付时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>settleDate</td> <td>String</td> <td>结算日期</td> <td>格式yyyy-MM-dd</td></tr> <tr><td>billFunds</td> <td>String</td> <td>资金渠道</td> <td>示例：支付宝余额:33I优惠券:55</td></tr> <tr><td>billFundsDesc</td> <td>String</td> <td>资金渠道描述</td> <td></td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;buyerUsername&quot;</span><span class="token operator">:</span> <span class="token string">&quot;654***@qq.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;trade.query&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tradeno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711212020052812050162647594&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;payTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 12:05:16&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errMsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;查询成功&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020052812102770274183&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;invoiceAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;settleDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;billFunds&quot;</span><span class="token operator">:</span> <span class="token string">&quot;支付宝余额:1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;buyerId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2088802252480865&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST0001&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;couponAmount&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020052822001480861408684890&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;billFundsDesc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;支付宝余额支付0.01元。&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetStatus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;merOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;O202005281205015446564381934&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetSys&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alipay 2.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;totalAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;responseTimestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 12:10:27&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;buyerPayAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TRADE_SUCCESS&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作失败&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="银商退款请求"><a href="#银商退款请求" aria-hidden="true" class="header-anchor">#</a> 银商退款请求</h2> <p><strong>API应用场景说明：</strong></p> <p>小程序商户银商退款请求。</p> <p>当成功交易之后一段时间内，由于买家或商户的原因需要退款时，商户可以通过本接口将支付款退还给买家，退款请求验证成功之后，银商将通知支付渠道方按照退款规则把支付款按原路退回到买家帐号上。</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>POST</td> <td>Json</td> <td>/unionpay/refund</td></tr></tbody></table> <p><strong><code>请求参数：[FormData, application/x-www-form-urlencoded]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>msgType</td> <td>String</td> <td>是</td> <td>消息类型</td> <td>refund</td></tr> <tr><td>requestTimestamp</td> <td>String</td> <td>是</td> <td>报文请求时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>是</td> <td>终端号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>是</td> <td>商户订单号</td> <td></td></tr> <tr><td>refundOrderId</td> <td>String</td> <td>是</td> <td>商户退款订单号</td> <td></td></tr> <tr><td>refundAmount</td> <td>Integer</td> <td>是</td> <td>退款金额</td> <td>单位分</td></tr> <tr><td>refundDesc</td> <td>String</td> <td>否</td> <td>退款说明</td> <td></td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>merOrderId=O202005281141426870057655555&amp;msgType=refund&amp;refundAmount=1&amp;refundDesc=test refund&amp;refundOrderId=RO202005281141426870057655555&amp;requestTimestamp=2020-05-28 11:55:38&amp;tid=TEST0001
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>UnionPayRefundResponseModel{}</strong></td> <td><strong>Object</strong></td> <td>** 银商退款请求返回模型**</td> <td></td></tr> <tr><td>errCode</td> <td>String</td> <td>平台错误码</td> <td>SUCCESS 表示请求成功</td></tr> <tr><td>errMsg</td> <td>String</td> <td>平台错误信息</td> <td>信息描述， 中文， 对应code的中文信息</td></tr> <tr><td>msgId</td> <td>String</td> <td>消息ID</td> <td>可协助后端快速排查问题</td></tr> <tr><td>msgType</td> <td>String</td> <td>消息类型</td> <td></td></tr> <tr><td>responseTimestamp</td> <td>String</td> <td>报文响应时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>小程序平台交易流水号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>商户订单号</td> <td></td></tr> <tr><td>targetOrderId</td> <td>String</td> <td>第三方支付订单号</td> <td></td></tr> <tr><td>refundno</td> <td>String</td> <td>小程序平台退款流水号</td> <td></td></tr> <tr><td>refundOrderId</td> <td>String</td> <td>商户退款订单号</td> <td></td></tr> <tr><td>refundTargetOrderId</td> <td>String</td> <td>第三方退款订单号</td> <td></td></tr> <tr><td>refundAmount</td> <td>Integer</td> <td>退款金额</td> <td>单位分</td></tr> <tr><td>refundInvoiceAmount</td> <td>Integer</td> <td>实付部分退款金额</td> <td>单位分</td></tr> <tr><td>targetSys</td> <td>String</td> <td>目标平台代码</td> <td></td></tr> <tr><td>targetStatus</td> <td>String</td> <td>目标平台的状态</td> <td></td></tr> <tr><td>refundStatus</td> <td>String</td> <td>退款状态</td> <td></td></tr> <tr><td>refundFunds</td> <td>String</td> <td>退款资金渠道</td> <td></td></tr> <tr><td>refundFundsDesc</td> <td>String</td> <td>退款资金渠道描述</td> <td></td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;errCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;merOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;O202005281141426870057655555&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020052811553819190134&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wx.refund&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundFunds&quot;</span><span class="token operator">:</span> <span class="token string">&quot;现金:1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundFundsDesc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;现金退款0.01元。&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundInvoiceAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RO202005281141426870057655555&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundStatus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundTargetOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50100004232020052800709285231&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711222020052811553818930626&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;responseTimestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 11:55:39&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetStatus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS|SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetSys&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WXPay&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST0001&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tradeno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711212020052811414274796709&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作失败&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="银商退款查询"><a href="#银商退款查询" aria-hidden="true" class="header-anchor">#</a> 银商退款查询</h2> <p><strong>API应用场景说明：</strong></p> <p>小程序商户银商退款查询。</p> <p>钱包支付时，因通讯故障、服务器故障等原因，造成收银机最终没有收到退货结果通知，收银员不确定该笔退货后台处理结果，查询该笔退货交易订单在钱包后台的支付结果，并将退货结果返回给收银机。</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>POST</td> <td>Json</td> <td>/unionpay/refundquery</td></tr></tbody></table> <p><strong><code>请求参数：[FormData, application/x-www-form-urlencoded]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>msgType</td> <td>String</td> <td>是</td> <td>消息类型</td> <td>refundQuery</td></tr> <tr><td>requestTimestamp</td> <td>String</td> <td>是</td> <td>报文请求时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>是</td> <td>终端号</td> <td></td></tr> <tr><td>refundno</td> <td>String</td> <td>否</td> <td>小程序平台退款流水号</td> <td>二选一</td></tr> <tr><td>refundOrderId</td> <td>String</td> <td>否</td> <td>商户退款订单号</td> <td>二选一</td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>msgType=refundQuery&amp;refundOrderId=RO202005281141426870057655555&amp;requestTimestamp=2020-05-28 11:55:39&amp;tid=TEST0001
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>UnionPayRefundQueryResponseModel{}</strong></td> <td><strong>Object</strong></td> <td>** 银商退款查询返回模型**</td> <td></td></tr> <tr><td>errCode</td> <td>String</td> <td>平台错误码</td> <td>SUCCESS 表示请求成功</td></tr> <tr><td>errMsg</td> <td>String</td> <td>平台错误信息</td> <td>信息描述， 中文， 对应code的中文信息</td></tr> <tr><td>msgId</td> <td>String</td> <td>消息ID</td> <td>可协助后端快速排查问题</td></tr> <tr><td>msgType</td> <td>String</td> <td>消息类型</td> <td></td></tr> <tr><td>responseTimestamp</td> <td>String</td> <td>报文响应时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>小程序平台交易流水号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>商户订单号</td> <td></td></tr> <tr><td>targetOrderId</td> <td>String</td> <td>第三方支付订单号</td> <td></td></tr> <tr><td>refundno</td> <td>String</td> <td>小程序平台退款流水号</td> <td></td></tr> <tr><td>refundOrderId</td> <td>String</td> <td>商户退款订单号</td> <td></td></tr> <tr><td>refundTargetOrderId</td> <td>String</td> <td>第三方退款订单号</td> <td></td></tr> <tr><td>refundAmount</td> <td>Integer</td> <td>退款金额</td> <td>单位分</td></tr> <tr><td>refundInvoiceAmount</td> <td>Integer</td> <td>实付部分退款金额</td> <td>单位分</td></tr> <tr><td>targetSys</td> <td>String</td> <td>目标平台代码</td> <td></td></tr> <tr><td>targetStatus</td> <td>String</td> <td>目标平台的状态</td> <td></td></tr> <tr><td>bankCardNo</td> <td>String</td> <td>银行卡号</td> <td>如果有的话</td></tr> <tr><td>bankInfo</td> <td>String</td> <td>银行信息</td> <td></td></tr> <tr><td>refundStatus</td> <td>String</td> <td>退款状态</td> <td></td></tr> <tr><td>refundFunds</td> <td>String</td> <td>退款资金渠道</td> <td></td></tr> <tr><td>refundFundsDesc</td> <td>String</td> <td>退款资金渠道描述</td> <td></td></tr> <tr><td>refundPayTime</td> <td>String</td> <td>退款时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>settleDate</td> <td>String</td> <td>结算日期</td> <td>格式yyyy-MM-dd</td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;bankInfo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;农业银行(借记卡)&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errMsg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;查询成功&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;merOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;O202005281141426870057655555&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020052811553936308811&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wx.refundQuery&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundFunds&quot;</span><span class="token operator">:</span> <span class="token string">&quot;现金:1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundFundsDesc&quot;</span><span class="token operator">:</span> <span class="token string">&quot;现金退款0.01元。&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundInvoiceAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RO202005281141426870057655555&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundPayTime&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 11:55:38&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundStatus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundTargetOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;50100004232020052800709285231&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;refundno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711222020052811553818930626&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;responseTimestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 11:55:39&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;settleDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetStatus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetSys&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WXPay&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST0001&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tradeno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711212020052811414274796709&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作失败&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="银商关闭订单"><a href="#银商关闭订单" aria-hidden="true" class="header-anchor">#</a> 银商关闭订单</h2> <p><strong>API应用场景说明：</strong></p> <p>小程序商户银商关闭订单</p> <p><strong><code>请求地址：</code></strong></p> <table><thead><tr><th>请求方式</th> <th>返回格式</th> <th>请求地址</th></tr></thead> <tbody><tr><td>POST</td> <td>Json</td> <td>/unionpay/close</td></tr></tbody></table> <p><strong><code>请求参数：[FormData, application/x-www-form-urlencoded]</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>必填</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>msgType</td> <td>String</td> <td>是</td> <td>消息类型</td> <td>close</td></tr> <tr><td>requestTimestamp</td> <td>String</td> <td>是</td> <td>报文请求时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>是</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>否</td> <td>小程序平台交易流水号</td> <td>二选一<code>对应银商商户订单号</code></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>否</td> <td>商户订单号</td> <td>二选一</td></tr></tbody></table> <p><strong><code>请求参数示例：</code></strong></p> <div class="language-html extra-class"><pre class="language-html"><code>merOrderId=O202005281148597766999168021&amp;msgType=close&amp;requestTimestamp=2020-05-28 12:11:27&amp;tid=TEST0001
</code></pre></div><p><strong><code>响应参数：</code></strong></p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td><strong>UnionPayCloseResponseModel{}</strong></td> <td><strong>Object</strong></td> <td>** 银商关闭订单返回模型**</td> <td></td></tr> <tr><td>errCode</td> <td>String</td> <td>平台错误码</td> <td>SUCCESS 表示请求成功</td></tr> <tr><td>errMsg</td> <td>String</td> <td>平台错误信息</td> <td>信息描述， 中文， 对应code的中文信息</td></tr> <tr><td>msgId</td> <td>String</td> <td>消息ID</td> <td>可协助后端快速排查问题</td></tr> <tr><td>msgType</td> <td>String</td> <td>消息类型</td> <td></td></tr> <tr><td>responseTimestamp</td> <td>String</td> <td>报文响应时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>tid</td> <td>String</td> <td>终端号</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>小程序平台交易流水号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>商户订单号</td> <td></td></tr> <tr><td>status</td> <td>String</td> <td>交易状态</td> <td></td></tr> <tr><td>targetSys</td> <td>String</td> <td>目标平台代码</td> <td></td></tr> <tr><td>targetStatus</td> <td>String</td> <td>目标平台的状态</td> <td></td></tr> <tr><td>totalAmount</td> <td>Integer</td> <td>支付总金额</td> <td>单位分</td></tr> <tr><td>settleDate</td> <td>String</td> <td>结算日期</td> <td>格式yyyy-MM-dd</td></tr></tbody></table> <p><strong><code>响应参数示例：[Json]</code></strong></p> <p><em>200响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;msgType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;trade.close&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tradeno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;711212020052811485982517889&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msgId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020052812113034409900&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;settleDate&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;tid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TEST0001&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;totalAmount&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;responseTimestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-28 12:11:30&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SUCCESS&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetStatus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;merOrderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;O202005281148597766999168021&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TRADE_CLOSED&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;targetSys&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alipay 2.0&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>400响应状态码</em></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;操作失败&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="银商支付结果异步通知"><a href="#银商支付结果异步通知" aria-hidden="true" class="header-anchor">#</a> 银商支付结果异步通知</h2> <p><strong>应用场景说明：</strong></p> <p>小程序商户银商支付结果异步通知，付款成功、退款等都会触发异步通知。</p> <p>支付完成后，渠道方会通知网付前置账单系统，账单系统收到通知后会组织结果信息发送通知到商户的通知地址。商户的通知地址可以在商户信息中配置，也可以在上送详单信息时上送，若都多处都配置了通知地址，那么账单系统会把结果通知到所有的地址上。</p> <p>注意：商户收到通知后，需要对通知做出响应：成功收到时响应”SUCCESS”；失败时响应”FAILED”。</p> <p>针对重复收到通知的问题处理：</p> <p>如果网付没有收到商户响应的SUCCESS字串，或者商户应答的报文中不包含SUCCESS字串，或者网络异常，系统会在24小时内尝试多次通知。商户收到重复通知时可以执行以下1或2进行处理:</p> <p>1.商户主动调网付查询接口，以查询结果为准。</p> <p>2.通知报文里面有商户订单号，商户可根据订单号和订单状态判断是否是重复通知，并忽略已经处理了的订单的重复通知。</p> <table><thead><tr><th>参数</th> <th>类型</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>openid</td> <td>String</td> <td>小程序商户ID</td> <td></td></tr> <tr><td>mpid</td> <td>String</td> <td>小程序ID</td> <td></td></tr> <tr><td>attachedData</td> <td>String</td> <td>商户附加数据</td> <td></td></tr> <tr><td>bankCardNo</td> <td>String</td> <td>银行卡号</td> <td></td></tr> <tr><td>bankInfo</td> <td>String</td> <td>银行信息</td> <td></td></tr> <tr><td>billFunds</td> <td>String</td> <td>资金渠道</td> <td></td></tr> <tr><td>billFundsDesc</td> <td>String</td> <td>资金渠道说明</td> <td></td></tr> <tr><td>buyerId</td> <td>String</td> <td>买家ID</td> <td></td></tr> <tr><td>buyerUsername</td> <td>String</td> <td>买家用户名</td> <td></td></tr> <tr><td>subBuyerId</td> <td>String</td> <td>子买家ID</td> <td></td></tr> <tr><td>tradeno</td> <td>String</td> <td>小程序平台交易流水号</td> <td></td></tr> <tr><td>merOrderId</td> <td>String</td> <td>商户订单号</td> <td></td></tr> <tr><td>orderDesc</td> <td>String</td> <td>订单描述</td> <td></td></tr> <tr><td>status</td> <td>String</td> <td>订单状态</td> <td></td></tr> <tr><td>buyerPayAmount</td> <td>Integer</td> <td>实付金额</td> <td>单位分</td></tr> <tr><td>totalAmount</td> <td>Integer</td> <td>支付总金额</td> <td>单位分</td></tr> <tr><td>invoiceAmount</td> <td>Integer</td> <td>开票金额</td> <td>单位分</td></tr> <tr><td>refundno</td> <td>String</td> <td>小程序平台退款流水号</td> <td></td></tr> <tr><td>refundOrderId</td> <td>String</td> <td>商户退款订单</td> <td></td></tr> <tr><td>refundAmount</td> <td>Integer</td> <td>退款金额</td> <td>单位分</td></tr> <tr><td>refundDesc</td> <td>String</td> <td>退款说明</td> <td></td></tr> <tr><td>targetOrderId</td> <td>String</td> <td>第三方支付订单号</td> <td></td></tr> <tr><td>refundTargetOrderId</td> <td>String</td> <td>第三方退款订单号</td> <td></td></tr> <tr><td>targetSys</td> <td>String</td> <td>目标平台代码</td> <td></td></tr> <tr><td>createTime</td> <td>String</td> <td>订单创建时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>payTime</td> <td>String</td> <td>订单支付时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>closeTime</td> <td>String</td> <td>订单关闭时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>refundPayTime</td> <td>String</td> <td>订单退款时间</td> <td>格式yyyy-MM-dd HH:mm:ss</td></tr> <tr><td>settleDate</td> <td>String</td> <td>结算日期</td> <td>格式yyyy-MM-dd</td></tr> <tr><td>refundSettleDate</td> <td>String</td> <td>退款结算日期</td> <td>格式yyyy-MM-dd</td></tr> <tr><td>notifyId</td> <td>String</td> <td>通知ID</td> <td></td></tr> <tr><td>sign</td> <td>String</td> <td>签名</td> <td></td></tr></tbody></table> <div class="language- extra-class"><pre class="language-text"><code>*支付回调结果示例*
```json
{
  &quot;buyerUsername&quot;: &quot;&quot;,
  &quot;tradeno&quot;: &quot;711212020052811414274796709&quot;,
  &quot;payTime&quot;: &quot;2020-05-28 11:47:48&quot;,
  &quot;sign&quot;: &quot;NhHvujI_Gim3NEeqR0kyumNK8sAvLvD9acuCCAFbeH_t8MxrBS8t7NRhiqmLgeHrS9QVPTwRZhL6pSWB5G8iDF&quot;,
  &quot;invoiceAmount&quot;: &quot;1&quot;,
  &quot;settleDate&quot;: &quot;2020-05-28&quot;,
  &quot;billFunds&quot;: &quot;现金:1&quot;,
  &quot;buyerId&quot;: &quot;otdJ_uGPmf3gymTdXT8SMJKjFNc8&quot;,
  &quot;mpid&quot;: &quot;MPAAABcicCKNKR7IVS4hyO&quot;,
  &quot;refundTargetOrderId&quot;: &quot;&quot;,
  &quot;refundDesc&quot;: &quot;&quot;,
  &quot;attachedData&quot;: &quot;&quot;,
  &quot;closeTime&quot;: &quot;&quot;,
  &quot;targetOrderId&quot;: &quot;4200000605202005286275291592&quot;,
  &quot;billFundsDesc&quot;: &quot;现金支付0.01元。&quot;,
  &quot;subBuyerId&quot;: &quot;o45PI5ZXYh4lS6gzQYALZkFn6WFs&quot;,
  &quot;orderDesc&quot;: &quot;prod-1590637297577&quot;,
  &quot;merOrderId&quot;: &quot;O202005281141426870057655555&quot;,
  &quot;refundAmount&quot;: &quot;&quot;,
  &quot;targetSys&quot;: &quot;WXPay&quot;,
  &quot;bankInfo&quot;: &quot;农业银行(借记卡)&quot;,
  &quot;bankCardNo&quot;: &quot;&quot;,
  &quot;openid&quot;: &quot;DVAAABbLK7Nw1l7_JG_MFO&quot;,
  &quot;refundSettleDate&quot;: &quot;&quot;,
  &quot;refundOrderId&quot;: &quot;&quot;,
  &quot;totalAmount&quot;: &quot;1&quot;,
  &quot;refundno&quot;: &quot;&quot;,
  &quot;createTime&quot;: &quot;2020-05-28 11:41:44&quot;,
  &quot;buyerPayAmount&quot;: &quot;1&quot;,
  &quot;refundPayTime&quot;: &quot;&quot;,
  &quot;notifyId&quot;: &quot;43d11f9f-aaad-47cd-a7ee-f82d5b7ccacd&quot;,
  &quot;status&quot;: &quot;TRADE_SUCCESS&quot;
}
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>*退款回调结果示例*
```json
{
  &quot;buyerUsername&quot;: &quot;&quot;,
  &quot;tradeno&quot;: &quot;711212020052811414274796709&quot;,
  &quot;payTime&quot;: &quot;2020-05-28 11:47:48&quot;,
  &quot;sign&quot;: &quot;e-A7kZPte2gAcA4eEGwsN8QTvYIgM7Mp4Xm17_br7ZhJSwfbTbLfGSWbaovaF05pD3s5i6VhVC1vNJI00oXdRP&quot;,
  &quot;invoiceAmount&quot;: &quot;1&quot;,
  &quot;settleDate&quot;: &quot;2020-05-28&quot;,
  &quot;billFunds&quot;: &quot;现金:1&quot;,
  &quot;buyerId&quot;: &quot;otdJ_uGPmf3gymTdXT8SMJKjFNc8&quot;,
  &quot;mpid&quot;: &quot;MPAAABcicCKNKR7IVS4hyO&quot;,
  &quot;refundTargetOrderId&quot;: &quot;50100004232020052800709285231&quot;,
  &quot;refundDesc&quot;: &quot;test refund&quot;,
  &quot;attachedData&quot;: &quot;&quot;,
  &quot;closeTime&quot;: &quot;2020-05-28 11:55:39&quot;,
  &quot;targetOrderId&quot;: &quot;4200000605202005286275291592&quot;,
  &quot;billFundsDesc&quot;: &quot;现金支付0.01元。&quot;,
  &quot;subBuyerId&quot;: &quot;o45PI5ZXYh4lS6gzQYALZkFn6WFs&quot;,
  &quot;orderDesc&quot;: &quot;prod-1590637297577&quot;,
  &quot;merOrderId&quot;: &quot;O202005281141426870057655555&quot;,
  &quot;refundAmount&quot;: &quot;1&quot;,
  &quot;targetSys&quot;: &quot;WXPay&quot;,
  &quot;bankInfo&quot;: &quot;农业银行(借记卡)&quot;,
  &quot;bankCardNo&quot;: &quot;&quot;,
  &quot;openid&quot;: &quot;DVAAABbLK7Nw1l7_JG_MFO&quot;,
  &quot;refundSettleDate&quot;: &quot;2020-05-28&quot;,
  &quot;refundOrderId&quot;: &quot;RO202005281141426870057655555&quot;,
  &quot;totalAmount&quot;: &quot;1&quot;,
  &quot;refundno&quot;: &quot;711222020052811553818930626&quot;,
  &quot;createTime&quot;: &quot;2020-05-28 11:41:44&quot;,
  &quot;buyerPayAmount&quot;: &quot;1&quot;,
  &quot;refundPayTime&quot;: &quot;2020-05-28 11:55:38&quot;,
  &quot;notifyId&quot;: &quot;9e7b7e23-7dac-4ae7-be74-f5aee726b7cb&quot;,
  &quot;status&quot;: &quot;TRADE_REFUND&quot;
}
</code></pre></div><h2 id="银商错误码、状态码枚举值"><a href="#银商错误码、状态码枚举值" aria-hidden="true" class="header-anchor">#</a> 银商错误码、状态码枚举值</h2> <p><strong>应用场景说明：</strong></p> <p>小程序商户银商错误码、状态码枚举值。</p> <p><em><strong>errCode取值说明：</strong></em></p> <table><thead><tr><th>取值</th> <th>描述</th> <th>原因和应对措施</th> <th>系统失败</th></tr></thead> <tbody><tr><td>SUCCESS</td> <td>成功</td> <td>无。</td> <td></td></tr> <tr><td>INTERNAL_ERROR</td> <td>内部错误</td> <td>系统错误，请联系技术支持。</td> <td>是</td></tr> <tr><td>BAD_REQUEST</td> <td>请求报文有错</td> <td>报文格式或字段值有误，请对照文档检查。</td> <td>是</td></tr> <tr><td>NO_SERVICE</td> <td>没有能处理请求msgtype的服务</td> <td>msgType错误，请检查文档，msgType是否拼写正确。</td> <td>是</td></tr> <tr><td>TIMEOUT</td> <td>处理超时</td> <td>处理超时，很可能是微信和支付宝的网络请求没应答，建议重试或者撤销交易。</td> <td>是</td></tr> <tr><td>NO_ORDER</td> <td>找不到请求的原始订单</td> <td>对应的mid+merOrderId不正确，无法找到原交易，请检查merOrderId是否跟原交易一致。</td> <td>否</td></tr> <tr><td>OPERATION_NOT_ALLOWED</td> <td>当前不允许此操作</td> <td>订单已经关闭，不能执行退货等操作。</td> <td>否</td></tr> <tr><td>TARGET_FAIL</td> <td>支付宝方支付失败，如请求没有成功，或者请求成功，但是没有正确处理。</td> <td>支付宝或者微信方业务失败，请根据返回信息确定具体原因。</td> <td>否</td></tr> <tr><td>DUP_ORDER</td> <td>重复的订单请求</td> <td>支付请求的merOrderId重复，请检查终端是否做过复位操作，导致流水号等重复。</td> <td>是</td></tr> <tr><td>NET_ERROR</td> <td>跟支付包通讯出问题，包括请求发送异常，报文应答不是200，请求被取消，应答超时等。</td> <td>通讯问题，联系运行检查网络情况。</td> <td>是</td></tr> <tr><td>NO_MERCHANT</td> <td>找不到请求指定的商户</td> <td>请求报文的mid在网付前置无法找到相关的配置，请确认终端的商户号是否正确在网付前置配置，是否经过转商户处理。</td> <td>否</td></tr> <tr><td>ORDER_PROCESSING</td> <td>订单正在处理中，不允许并发操作。</td> <td>当前订单的上一次操作没有完成，订单处于锁定状态，请等待一分钟后再试。</td> <td>否</td></tr> <tr><td>INACTIVE_MERCHANT</td> <td>商户被置为inactive状态</td> <td>交易商户在网付前置被冻结。</td> <td>否</td></tr> <tr><td>ABNORMAL_REQUEST_TIME</td> <td>请求时间异常</td> <td>请求终端或者平台的系统时间不正常，请检查系统时间。</td> <td>是</td></tr> <tr><td>TXN_DISCARDED</td> <td>请求开始处理时间延迟过大，交易被丢弃。</td> <td>系统负载过大，交易被丢弃，请联系运行。</td> <td>是</td></tr> <tr><td>BAD_SIGN</td> <td>签名错误</td> <td>报文签名错误，请联系技术指导签名算法。</td> <td>是</td></tr> <tr><td>INVALID_MSGSRC</td> <td>商户来源错误</td> <td>系统配置有问题，请联系技术。</td> <td>是</td></tr> <tr><td>INVALID_ORDER</td> <td>订单信息异常</td> <td>该订单支付时有异常，缺少关键数据，请先做一笔订单查询，补充关键数据后再次进行退货等操作。</td> <td>是</td></tr> <tr><td>NO_CROSS_DAY_TRADING</td> <td>不允许跨日交易</td> <td>可能某些渠道不支持跨日撤销，建议做退货。</td> <td>否</td></tr> <tr><td>DENIED_IP</td> <td>不允许此IP交易</td> <td>IP不在白名单中，请联系管理员确认。</td> <td>否</td></tr> <tr><td>INVLID_MERCHANT_CONFIG</td> <td>错误的商户配置</td> <td>商户配置参数有问题，请联系业务人员检查商户配置参数。</td> <td>是</td></tr> <tr><td>INVALID_RESPONSE</td> <td>无效的应答报文</td> <td>支付渠道方的应答报文有问题，比如验签失败、报文格式错误等。</td> <td>是</td></tr></tbody></table> <p><em><strong>refundStatus取值说明：</strong></em></p> <table><thead><tr><th>取值</th> <th>描述</th> <th>备注</th></tr></thead> <tbody><tr><td>UNKNOWN</td> <td>不明确的交易状态</td> <td>需要调退款查询接口确认退款结果</td></tr> <tr><td>SUCCESS</td> <td>退款成功</td> <td></td></tr> <tr><td>FAIL</td> <td>退款失败</td> <td></td></tr> <tr><td>PROCESSING</td> <td>退款处理中</td> <td>需要调退款查询接口确认退款结果</td></tr></tbody></table> <p><em><strong>status取值说明：</strong></em></p> <table><thead><tr><th>取值</th> <th>描述</th> <th>备注</th></tr></thead> <tbody><tr><td>NEW_ORDER</td> <td>新订单</td> <td></td></tr> <tr><td>UNKNOWN</td> <td>不明确的交易状态</td> <td></td></tr> <tr><td>TRADE_CLOSED</td> <td>在指定时间段内未支付时关闭的交易；在交易完成全额退款成功时关闭的交易；支付失败的交易。</td> <td>TRADE_CLOSED的交易不允许进行任何操作。</td></tr> <tr><td>WAIT_BUYER_PAY</td> <td>交易创建，等待买家付款。</td> <td></td></tr> <tr><td>TRADE_SUCCESS</td> <td>支付成功</td> <td></td></tr> <tr><td>TRADE_REFUND</td> <td>订单转入退货流程</td> <td>退货可能是部分也可能是全部。</td></tr></tbody></table> <p><em><strong>targetSys取值说明：</strong></em></p> <table><thead><tr><th>取值</th> <th>描述</th> <th>备注</th></tr></thead> <tbody><tr><td>Alipay 1.0</td> <td>支付宝1.0协议</td> <td>比较少用</td></tr> <tr><td>Alipay 2.0</td> <td>支付宝2.0协议</td> <td>主流</td></tr> <tr><td>WXPay</td> <td>微信</td> <td></td></tr> <tr><td>YQB</td> <td>壹钱包</td> <td></td></tr> <tr><td>QMF</td> <td>全民付远程快捷</td> <td></td></tr> <tr><td>UnionPay</td> <td>银联钱包</td> <td></td></tr> <tr><td>BaiDu</td> <td>百度钱包</td> <td></td></tr> <tr><td>JD</td> <td>京东钱包</td> <td></td></tr> <tr><td>SF</td> <td>顺丰顺手付</td> <td></td></tr> <tr><td>COMM</td> <td>交通银行</td> <td></td></tr> <tr><td>BestPay</td> <td>翼支付</td> <td></td></tr> <tr><td>ACP</td> <td>银联全渠道立码付</td> <td></td></tr> <tr><td>NetPayBills</td> <td>银商网付平台账单模块</td> <td></td></tr> <tr><td>NetPayGtwy</td> <td>银商网付平台网关模块</td> <td></td></tr> <tr><td>QmfWebPay</td> <td>POS通插件WEB版</td> <td></td></tr> <tr><td>UAC</td> <td>银联全渠道</td> <td></td></tr></tbody></table> <h2 id="_400响应错误码"><a href="#_400响应错误码" aria-hidden="true" class="header-anchor">#</a> 400响应错误码</h2> <div class="language-text extra-class"><pre class="language-text"><code>code:3000, message:&quot;操作失败&quot;
code:3001, message:&quot;数据已存在&quot;
code:3002, message:&quot;参数验证失败&quot;
code:3003, message:&quot;数据不存在&quot;
code:3004, message:&quot;签名验证失败&quot;
code:3005, message:&quot;签名已过期&quot;
code:3006, message:&quot;没有该API访问权限&quot;
code:3007, message:&quot;无效授权token&quot;
code:3008, message:&quot;用户不存在&quot;
code:3016, message:&quot;银商支付，不允许退款操作&quot;
code:3017, message:&quot;银商支付，调用银商接口出现异常&quot;
code:3018, message:&quot;银商支付，入网角色异常&quot;
code:3019, message:&quot;银商支付，该支付订单号业务处理失败，请更换支付订单号&quot;
code:3020, message:&quot;银商支付，支付订单号不存在&quot;
code:3021, message:&quot;银商支付，该退款订单号业务处理失败，请更换退款订单号&quot;
code:3022, message:&quot;银商支付，该退款订单号重复，已经发起过退款申请&quot;
code:3023, message:&quot;银商支付，该支付订单号重复，已经发起过下单&quot;
code:3024, message:&quot;银商支付，该APP未配置微信appkey&quot;
code:3025, message:&quot;银商支付，该支付渠道暂未启用&quot;
code:3026, message:&quot;银商支付，收银台无效授权支付token&quot;
code:3027, message:&quot;银商支付，资金已划账，不允许退款操作&quot;
code:3028, message:&quot;银商支付，超过退款期限，不允许退款操作&quot;
code:3029, message:&quot;银商支付，退款订单号不存在&quot;
code:-1, message:&quot;系统错误&quot;
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/mpweex-site/guide/develop/integrate-pay.html" class="prev">
          小程序集成支付
        </a></span> <span class="next"><a href="/mpweex-site/guide/develop/integrate-to-android-app.html">
          集成小程序SDK
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/mpweex-site/assets/js/app.f6619798.js" defer></script><script src="/mpweex-site/assets/js/96.249615e6.js" defer></script>
  </body>
</html>
