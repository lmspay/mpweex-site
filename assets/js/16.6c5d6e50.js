(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{237:function(e,t,r){e.exports=r.p+"assets/img/device-2019-10-22-112648.dbd5a258.png"},248:function(e,t,r){"use strict";r.r(t);var n=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"集成-mpweex-到-ios"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#集成-mpweex-到-ios","aria-hidden":"true"}},[this._v("#")]),this._v(" 集成 MPWeex 到 iOS")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_1-配置依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置依赖","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 配置依赖")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("source 'git@github.com:CocoaPods/Specs.git'\ntarget 'YourTarget' do\n    platform :ios, '8.0'\n    pod 'MPWeexSDK', '0.28.0'\nend\n\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("运行 "),t("code",[this._v("pod install")]),this._v(" 命令安装依赖。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_2-初始化sdk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-初始化sdk","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 初始化SDK")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("建议在 "),t("code",[this._v("didFinishLaunchingWithOptions")]),this._v(" 回调中初始化MPWeex。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('// 初始化MPWeex\n[[MPWeexSDKManager sharedInstance] initialize];\n[[MPWeexSDKManager sharedInstance] setAppID:@"your mpweex appid."\n                                    license:@"your mpweex license."];\n[[MPWeexSDKManager sharedInstance] setBasePath:@"mpweex api host."];\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_3-扩展图片加载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-扩展图片加载","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 扩展图片加载")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"_3-1-修改初始化参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-修改初始化参数","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.1 修改初始化参数")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('// 初始化MPWeex\n[[MPWeexSDKManager sharedInstance] initialize];\n[[MPWeexSDKManager sharedInstance] setAppID:@"your mpweex appid."\n                                    license:@"your mpweex license."];\n[[MPWeexSDKManager sharedInstance] setBasePath:@"mpweex api host."];\n// 注册自定义图片加载协议实现\n[[MPWeexSDKManager sharedInstance] registerHandler:[WXImageProtocolImpl new] withProtocol:@protocol(WXImgLoaderProtocol)];\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_4-登录信息同步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-登录信息同步","aria-hidden":"true"}},[this._v("#")]),this._v(" 4. 登录信息同步")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tip custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),t("p",[this._v("此接口是幂等的，可重复调用，平台内只会进行一次用户信息登记。后续调用平台将会进行用户资料的同步操作。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("接口描述")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/// 登录成功后，将用户信息同步至小程序平台\n/// platformuid及phoneno必传，其它为可选参数\n/// 此操作为异步操作，如果需要监听SDK是否已经完成，可以通过callback监听\n/// @param uid APP商户应用的用户ID  (required)\n/// @param phoneNo 手机号码  (required)\n/// @param realName 真实姓名\n/// @param gender 性别 0女 1男 2未设置\n/// @param idType 证件类型 01 身份证\n/// @param idNo 证件号\n/// @param nickName 昵称\n/// @param avatar 头像\n/// @param bankNo 银行卡号 多个逗号隔开\n/// @param callback 异步回调，如果需要等待SDK完成，则可通过回调监听  (required)\n- (void)loginWithPlatformUID:(NSString *)uid\n                     phoneNo:(NSString *)phoneNo\n                    realName:(NSString *)realName\n                      gender:(NSNumber *)gender\n                      idType:(NSString *)idType\n                        idNo:(NSString *)idNo\n                    nickName:(NSString *)nickName\n                      avatar:(NSString *)avatar\n                      bankNo:(NSString *)bankNo\n           completionHandler:(WXOpenAccountCallback)callback;\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("DEMO")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[[MPWeexSDKManager sharedInstance] \n               loginWithPlatformUID:@"your app useridentity"\n                            phoneNo:@"your app user phone number"\n                           realName:@"your app user realname"\n                             gender:@(2)\n                             idType:nil\n                               idNo:nil\n                           nickName:@"your app user nickname"\n                             avatar:@"your app user avatar"\n                             bankNo:nil\n                  completionHandler:^(BOOL sucessed, NSError *error) {\n    // your code if needed.\n}];\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_5-退出登录通知接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-退出登录通知接口","aria-hidden":"true"}},[this._v("#")]),this._v(" 5. 退出登录通知接口")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/// 退出登录时，通知SDK\n- (void)logout;\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("DEMO")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("// 通知SDK退出登录\n[[MPWeexSDKManager sharedInstance] logout];\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_6-实现获取用户信息接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-实现获取用户信息接口","aria-hidden":"true"}},[this._v("#")]),this._v(" 6. 实现获取用户信息接口")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:r(237),alt:"授权登录"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"warning custom-block"},[t("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),this._v(" "),t("p",[this._v("此接口只是供SDK显示用户信息用，小程序是需要授权后，通过后台交互获取，无法直接从APP获取的。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('#import <UIKit/UIKit.h>\n#import <MPWeexSDK/WXUserInfoProtocol.h>\n\n@interface WXUserInfoProtocolImpl : NSObject <WXUserInfoProtocol>\n/// 获取APP用户信息\n- (WXUserInfoModel *)getUserInfo;\n\n/// 确保用户已经登录\n/// @param sourceViewController 源控制器\n- (BOOL)ensureLoggedWithSourceViewController:(UIViewController *)sourceViewController;\n@end\n\n\n#import "WXUserInfoProtocolImpl.h"\n#import <MPWeexSDK/WXUserInfoModel.h>\n\n@implementation WXUserInfoProtocolImpl\n\n- (WXUserInfoModel *)getUserInfo {\n    // 替换为APP用户信息\n    WXUserInfoModel *userInfo = [[WXUserInfoModel alloc] init];\n    userInfo.gender = 0;\n    userInfo.nickName = @"小众";\n    // 如果头像地址有有效期限制的，建议提供半小时内有效的链接\n    userInfo.avatar = @"http://39.100.48.104:18080/avatar.png";\n    return userInfo;\n}\n\n- (BOOL)ensureLoggedWithSourceViewController:(UIViewController *)sourceViewController {\n    // APP用户登录状态\n    BOOL logined = YES;\n    \n    if (logined) {\n        // 用户已登录则直接返回true\n        return true;\n    } else {\n        // 跳转实现\n        return false;\n    }\n}\n@end\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("ensureLoggedWithSourceViewController:\n此方法用于判断用户是否已经登录，因为大部分小程序都是需要用户登录后方可操作的。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"_6-1-修改初始化参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-修改初始化参数","aria-hidden":"true"}},[this._v("#")]),this._v(" 6.1 修改初始化参数")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('// 初始化MPWeex\n[[MPWeexSDKManager sharedInstance] initialize];\n[[MPWeexSDKManager sharedInstance] setAppID:@"your mpweex appid."\n                                    license:@"your mpweex license."];\n[[MPWeexSDKManager sharedInstance] setBasePath:@"mpweex api host."];\n// 注册自定义用户协议实现\n[[MPWeexSDKManager sharedInstance] registerHandler:[WXUserInfoProtocolImpl new] withProtocol:@protocol(WXUserInfoProtocol)];\n\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"_7-sdk其它api使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-sdk其它api使用方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 7. SDK其它API使用方法")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"_7-1-跳转至指定小程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-跳转至指定小程序","aria-hidden":"true"}},[this._v("#")]),this._v(" 7.1 跳转至指定小程序")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("接口")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/// 跳转至小程序\n/// @param sourceViewController 源控制器\n/// @param mpID 小程序ID\n/// @param logo 小程序图标\n/// @param systemType 小程序系统类型 0宿主、1普通、 2游戏\n/// @param offlineSupportType 是否支持离线访问 0不支持、1支持 不支持离线访问的，需要先登录\n- (void)presentMPViewControllerWithSourceViewController:(UIViewController *)sourceViewController\n                                                   mpID:(NSString *)mpID\n                                                   logo:(NSString *)logo\n                                             systemType:(WXMPSystemType)systemType\n                                     offlineSupportType:(WXMPOfflineSupportType)offlineSupportType;\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("调用示例")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('[[MPWeexSDKManager sharedInstance] presentMPViewControllerWithSourceViewController:self\n    mpID:@"MPAAABa7vz87hIvbIAq1lG"  // MPID\n    logo:@"images/AAFLlQAAAWzlpHpnAgI" // MP LOGO\n    systemType:WXMPSystemTypeNormal // MP TYPE 默认WXMPSystemTypeNormal\n    offlineSupportType:WXMPOfflineSupportTypeNotCan]; // 是否支持离线访问\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"_7-2-跳转至指定页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-跳转至指定页面","aria-hidden":"true"}},[this._v("#")]),this._v(" 7.2 跳转至指定页面")])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("接口")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("/// 跳转到指定页面\n/// @param sourceViewController 源控制器\n/// @param page 指定页面\n- (void)jumpToPageWithSourceViewController:(UIViewController *)sourceViewController\n                                    mpInfo:(WXMPPage)page;\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("页面参数")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("typedef NS_ENUM(NSInteger, MPPage) {\n    /** 小程序主页 */\n    MPPageIndex,\n    /** 最近使用 */\n    MPPageRecent,\n    /** 我的小程序 */\n    MPPageMymp,\n    /** 推荐的 */\n    MPPageRecommend,\n    /** 搜索 */\n    MPPageSearch\n};\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[this._v("调用示例")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-objective-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("[[MPWeexSDKManager sharedInstance] jumpToPageWithSourceViewController:self\n                                                                 page:WXMPPageIndex];\n")])])])}],a=r(0),s=Object(a.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),r("p",[e._v("使用"),r("a",{attrs:{href:"https://cocoapods.org/?spm=a2c7j.-zh-guide-develop-integrate-to-iOS-app.0.0.620a1a8e0YV8s4",target:"_blank",rel:"noopener noreferrer"}},[e._v("CocoaPods"),r("OutboundLink")],1),e._v("可以方便的将MPWeex集成到自己的项目中。")]),e._v(" "),e._m(1),e._v(" "),r("p",[e._v("从CocoaPods"),r("a",{attrs:{href:"https://github.com/lmspay/MPWeexSDK",target:"_blank",rel:"noopener noreferrer"}},[e._v("仓库"),r("OutboundLink")],1),e._v("中获取MPWeex的最新版本。")]),e._v(" "),r("p",[e._v("将MPWeex添加到你的Podfile文件中。")]),e._v(" "),e._m(2),e._m(3),e._v(" "),e._m(4),e._v(" "),r("p",[e._v("APP商户入驻成功后，系统会分配APPID、License和白盒密码算法密钥mpweex.bmp，将mpweex.bmp添加到工程目录中。")]),e._v(" "),e._m(5),e._v(" "),e._m(6),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/lmspay/mpweex-demo/blob/master/MPWeexiOS/MPWeexiOS/AppDelegate.m",target:"_blank",rel:"noopener noreferrer"}},[e._v("DEMO初始化源码"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("router-link",{attrs:{to:"./../extend/extend-ios.html"}},[e._v("其它扩展配置看这里")])],1)]),e._v(" "),e._m(7),e._v(" "),r("p",[e._v("MPWeex不提供图片加载能力。自定义图片加载，需要实现WXImgLoaderProtocol协议。")]),e._v(" "),r("p",[e._v("参见："),r("a",{attrs:{href:"https://github.com/lmspay/mpweex-demo/blob/master/MPWeexiOS/MPWeexiOS/WXImageProtocolImpl.h",target:"_blank",rel:"noopener noreferrer"}},[e._v("WXImageProtocolImpl"),r("OutboundLink")],1)]),e._v(" "),e._m(8),e._v(" "),e._m(9),e._m(10),e._v(" "),r("p",[e._v("APP内，如果要完全支持小程序功能，用户需要在小程序平台进行登录信息同步。在用户登录成功或用户资料有更新时，调用此接口。")]),e._v(" "),e._m(11),e._v(" "),e._m(12),e._v(" "),e._m(13),e._m(14),e._v(" "),e._m(15),e._m(16),e._v(" "),r("p",[e._v("APP内，如果退出登录了，需要调用此接口通知SDK，以进行登录状态的同步。")]),e._v(" "),e._m(17),e._m(18),e._v(" "),e._m(19),e._m(20),e._v(" "),r("p",[e._v("小程序在授权登录时，需要显示用户的基本信息，故需要实现WXUserInfoProtocol，并在初始化时设置。")]),e._v(" "),e._m(21),e._v(" "),e._m(22),e._v(" "),r("p",[e._v("接口示例：")]),e._v(" "),e._m(23),e._m(24),e._v(" "),e._m(25),e._v(" "),e._m(26),e._m(27),e._v(" "),e._m(28),e._v(" "),r("p",[e._v("在APP中，可通过MPID跳转到指定的小程序。")]),e._v(" "),e._m(29),e._v(" "),e._m(30),e._m(31),e._v(" "),e._m(32),e._m(33),e._v(" "),r("p",[e._v("在APP中，可通过SDK跳转到指定的小程序页面。")]),e._v(" "),e._m(34),e._v(" "),e._m(35),e._m(36),e._v(" "),e._m(37),e._m(38),e._v(" "),e._m(39)])},n,!1,null,null,null);t.default=s.exports}}]);